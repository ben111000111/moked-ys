<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>שבתות קדימה | מוקד יד שרה</title>
    <link rel="icon" type="image/png" href="logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;700;800&display=swap" rel="stylesheet">
</head>
<body class="bg-slate-50 font-['Assistant'] pb-20">
    <script>if(localStorage.getItem('user_auth') !== 'true') window.location.replace('login.html');</script>

    <header class="bg-white border-b-2 border-slate-200 p-4 sticky top-0 z-50 flex justify-between items-center text-right shadow-sm">
        <div class="flex items-center gap-4">
            <img src="logo.png" class="h-12">
            <h1 class="text-xl font-black text-slate-800">שבתות קרובות</h1>
        </div>
        <a href="index.html" class="p-3 bg-slate-100 rounded-full text-blue-600 hover:bg-blue-100 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
        </a>
    </header>

    <main class="max-w-3xl mx-auto p-6 space-y-4 text-right" id="sabbathList">
        <div class="text-center py-10 opacity-30 font-bold">טוען רשימת שבתות...</div>
    </main>

    <script src="config.js"></script>
    <script>
        const PARASHOT_FALLBACK = {"2026-01-03":"ויחי", "2026-01-10":"שמות", "2026-01-17":"וארא", "2026-01-24":"בא", "2026-01-31":"בשלח", "2026-02-07":"יתרו", "2026-02-14":"משפטים"};

        async function renderSabbaths() {
            const list = document.getElementById('sabbathList');
            list.innerHTML = "";
            let sat = new Date(); 
            // מוצאים את השבת הקרובה
            sat.setDate(sat.getDate() + (6 - sat.getDay()));

            for(let i=0; i<10; i++) {
                let d = new Date(sat); 
                d.setDate(sat.getDate() + (i*7));
                let dKey = d.toISOString().split('T')[0];
                
                // תאריך עברי
                const hRes = await fetch(`https://www.hebcal.com/converter?cfg=json&gy=${d.getFullYear()}&gm=${d.getMonth()+1}&gd=${d.getDate()}&g2h=1`);
                const hData = await hRes.json();

                // פרשה
                let pName = "השבוע";
                try {
                    const pRes = await fetch(`https://www.hebcal.com/hebcal?v=1&cfg=json&maj=on&year=${d.getFullYear()}&month=${d.getMonth()+1}`);
                    const pData = await pRes.json();
                    const item = pData.items.find(it => it.category === "parashat" && it.date === dKey);
                    pName = item ? item.hebrew : (PARASHOT_FALLBACK[dKey] || "השבוע");
                } catch(e) { pName = PARASHOT_FALLBACK[dKey] || "השבוע"; }

                list.innerHTML += `
                    <div class="bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex justify-between items-center hover:border-blue-500 hover:shadow-md transition-all cursor-pointer group" onclick="window.location.href='index.html?jump=${dKey}'">
                        <div>
                            <div class="text-2xl font-black text-slate-800 group-hover:text-blue-600 transition-colors">שבת פרשת ${pName}</div>
                            <div class="text-blue-600 font-bold">${hData.hebrew} | <span class="text-slate-400 font-medium">${d.toLocaleDateString('he-IL')}</span></div>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-full group-hover:bg-blue-600 group-hover:text-white transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                            </svg>
                        </div>
                    </div>`;
            }
        }
        renderSabbaths();
    </script>
</body>
</html>
